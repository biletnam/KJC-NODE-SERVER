{"version":3,"sources":["../../../rest_controller/price/seatType.js"],"names":["express","require","router","Router","seatTypeService","Joi","get","req","res","findSeatTypeAll","then","data","send","catch","error","status","post","console","log","body","validateSeatType","details","message","seatTypeObject","SEAT_TYPE_NAME","name","ADD_COST","price","insertSeatType","result","seatType","scheme","string","min","required","number","validate","module","exports"],"mappings":";;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,SAASF,QAAQG,MAAR,EAAf;AACA,IAAMC,kBAAkBH,QAAQ,yCAAR,CAAxB;AACA,IAAMI,MAAMJ,QAAQ,KAAR,CAAZ;;AAEAC,OAAOI,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BJ,oBAAgBK,eAAhB,GACKC,IADL,CACU,UAACC,IAAD;AAAA,eAAUH,IAAII,IAAJ,CAASD,IAAT,CAAV;AAAA,KADV,EAEKE,KAFL,CAEW,UAACC,KAAD;AAAA,eAAWN,IAAIO,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB,gBAArB,CAAX;AAAA,KAFX;AAGH,CAJD;;AAMAV,OAAOc,IAAP,CAAY,GAAZ,EAAiB,UAACT,GAAD,EAAMC,GAAN,EAAa;AAC1BS,YAAQC,GAAR,CAAYX,IAAIY,IAAhB;;AAD0B,4BAEVC,iBAAiBb,IAAIY,IAArB,CAFU;AAAA,QAEnBL,KAFmB,qBAEnBA,KAFmB;;AAG1B,QAAGA,KAAH,EAAU;AACNN,YAAIO,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqBE,MAAMO,OAAN,CAAc,CAAd,EAAiBC,OAAtC;AACA;AACH;AACD,QAAMC,iBAAiB;AACnBC,wBAAgBjB,IAAIY,IAAJ,CAASM,IADN;AAEnBC,kBAAUnB,IAAIY,IAAJ,CAASQ;AAFA,KAAvB;AAIAvB,oBAAgBwB,cAAhB,CAA+BL,cAA/B,EACKb,IADL,CACU,UAACmB,MAAD,EAAY;AAACrB,YAAII,IAAJ,CAAS,SAAT;AAAoB,KAD3C,EAEKC,KAFL,CAEW,UAACC,KAAD;AAAA,eAAWG,QAAQC,GAAR,CAAYJ,KAAZ,CAAX;AAAA,KAFX;AAGH,CAdD;;AAgBA,SAASM,gBAAT,CAA0BU,QAA1B,EAAoC;AAChC,QAAMC,SAAS;AACXN,cAAMpB,IAAI2B,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoBC,QAApB,EADK;AAEXP,eAAOtB,IAAI8B,MAAJ,GAAaF,GAAb,CAAiB,CAAjB,EAAoBC,QAApB;AAEX;AAJe,KAAf,CAKA,OAAO7B,IAAI+B,QAAJ,CAAaN,QAAb,EAAsBC,MAAtB,CAAP;AACH;;AAEDM,OAAOC,OAAP,GAAiBpC,MAAjB","file":"seatType.js","sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst seatTypeService = require('../oraclDBService/price/seatTypeService');\r\nconst Joi = require('joi');\r\n\r\nrouter.get('/', (req, res) => {\r\n    seatTypeService.findSeatTypeAll()\r\n        .then((data) => res.send(data))\r\n        .catch((error) => res.status(400).send('find seat type'));\r\n});\r\n\r\nrouter.post('/', (req, res) =>{\r\n    console.log(req.body);\r\n    const {error} = validateSeatType(req.body);\r\n    if(error) {\r\n        res.status(400).send(error.details[0].message);\r\n        return;\r\n    }\r\n    const seatTypeObject = {\r\n        SEAT_TYPE_NAME: req.body.name,\r\n        ADD_COST: req.body.price\r\n    }\r\n    seatTypeService.insertSeatType(seatTypeObject)\r\n        .then((result) => {res.send('success')})\r\n        .catch((error) => console.log(error));\r\n});\r\n\r\nfunction validateSeatType(seatType) {\r\n    const scheme = {\r\n        name: Joi.string().min(1).required(),\r\n        price: Joi.number().min(0).required()\r\n    }\r\n    //\t\tminAge: Joi.number().required(),\r\n    return Joi.validate(seatType,scheme);\r\n}\r\n\r\nmodule.exports = router;"]}